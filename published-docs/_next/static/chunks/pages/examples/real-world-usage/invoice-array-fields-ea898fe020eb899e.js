(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{6294:function(e,i,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/examples/real-world-usage/invoice-array-fields",function(){return s(3059)}])},3059:function(e,i,s){"use strict";s.r(i),s.d(i,{__N_SSG:function(){return F},default:function(){return S}});var t,n,l,r,a=s(5893),c=s(9008),d=s.n(c),o=s(2669),u=s(9404),m=s(7294),h=s(7245),x=s(478),j=s(5005),p=s(5147),v=s(3149),y=s(1954);(t=l||(l={})).Service="service",t.Goods="goods";let f=[{value:l.Service,label:"Service"},{value:l.Goods,label:"Goods"}];(n=r||(r={})).Hours="hours",n.Pieces="pieces";let b=[{value:r.Hours,label:"hrs"},{value:r.Pieces,label:"pcs"}],N={isActive:!0,title:"",type:"",price:0,quantity:0,unit:""};function g(e){if(e<0)throw new h.p8("Number must be greater than 0.")}let w={required:{fields:["type","price","quantity","unit"]},validators:{price:g,quantity:g,title:e=>{if(e.length<10)throw new h.p8("Title must be at least 10 characters long.")}}};function _(e){let{index:i,data:s,setData:t,handleRemoveLine:n}=e,{formProps:c,names:d,errorData:o,setValues:u}=(0,h.fu)({name:"example-invoice-array-fields-form-".concat(i),mode:"onBlurUnlessError",onSubmit:t,onChange:t,defaultValues:{...N,...s},validationSchema:w,liveFields:["isActive","quantity","price"]}),{errors:p}=o,{isActive:g}=s;(0,m.useEffect)(()=>{s.type===l.Service&&u({unit:r.Hours}),s.type===l.Goods&&u({unit:r.Pieces})},[s.type]);let[_,q]=m.useState(null);return(0,m.useLayoutEffect)(()=>{let e=s.price*s.quantity;q("".concat(Number(Number.isNaN(e)?0:e).toFixed(2)," €"))},[s.price,s.quantity]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("form",{...c,children:[(0,a.jsxs)(x.Z,{direction:"horizontal",className:"align-items-center",children:[(0,a.jsx)("div",{className:"mt-3 me-2",children:(0,a.jsx)(v.z8,{type:"switch",name:d.isActive})}),(0,a.jsxs)(v.cw,{layout:[7,5],children:[(0,a.jsxs)(v.cw,{layout:[8,4],children:[(0,a.jsx)(v.cC,{label:"Title",small:!0,disabled:!g,name:d.title,error:p.title}),(0,a.jsx)(v.ih,{options:f,label:"Type",small:!0,disabled:!g,name:d.type,error:p.type})]}),(0,a.jsxs)(v.cw,{children:[(0,a.jsx)(v.cC,{label:"Quantity",small:!0,disabled:!g,type:"number",name:d.quantity,error:p.quantity}),(0,a.jsx)(v.ih,{options:b,label:"Unit",small:!0,disabled:!g,name:d.unit,error:p.unit}),(0,a.jsx)(v.cC,{label:"Price",small:!0,disabled:!g,name:d.price,error:p.price})]})]})]}),(0,a.jsxs)(x.Z,{direction:"horizontal",className:"align-items-center justify-content-end",children:[(0,a.jsxs)("small",{className:"me-3",style:{textDecorationLine:g?"none":"line-through"},children:[(0,a.jsx)("strong",{children:"Line total: "}),(0,a.jsx)("span",{className:"text-muted",children:_})]}),(0,a.jsxs)(j.Z,{variant:"outline-danger",size:"sm",onClick:n,children:[(0,a.jsx)(y.JO,{icon:"tabler:trash",className:"me-1"}),"Remove"]})]})]})})}function q(){var e;let[i,s]=(0,m.useState)([{isActive:!0,title:"iPhone 13, 128GB, Blue",type:l.Goods,quantity:2,unit:r.Pieces,price:899},{isActive:!1,title:"Extended warranty (36 months)",type:l.Service,quantity:2,unit:r.Pieces,price:99}]),[t,n]=(0,m.useState)(""),[c,d]=(0,m.useState)(!1);(0,m.useEffect)(()=>{let e=i.reduce((e,i)=>i.isActive?i.price*i.quantity+e:e,0);n(Number.isNaN(e)?"-":e.toFixed(2)+" €")},[i]);let u=(e,i)=>{s(s=>{let t=[...s];return t[e]=i,t})},h=()=>{s(e=>[...e,N])},b=e=>{s(i=>{let s=[...i];return s.splice(e,1),s})},g=()=>d(!c);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.i3,{children:"Invoice details"}),(0,a.jsx)(o.Z,{small:!0}),c?(0,a.jsxs)(p.Z,{striped:!0,className:"mb-4",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:(0,a.jsx)("small",{children:"Title"})}),(0,a.jsx)("th",{children:(0,a.jsx)("small",{children:"Type"})}),(0,a.jsx)("th",{children:(0,a.jsx)("small",{children:"Quantity"})}),(0,a.jsx)("th",{children:(0,a.jsx)("small",{children:"Price"})})]})}),(0,a.jsx)("tbody",{children:i.map((i,s)=>{var t;return(0,a.jsxs)("tr",{style:{textDecorationLine:i.isActive?"none":"line-through"},children:[(0,a.jsx)("td",{children:(0,a.jsx)("small",{className:"fw-bold",children:i.title||(0,a.jsx)("span",{className:"text-muted",children:"No description provided."})})}),(0,a.jsx)("td",{children:(0,a.jsx)("small",{children:null!==(e=null===(t=f.find(e=>e.value===i.type))||void 0===t?void 0:t.label)&&void 0!==e?e:"-"})}),(0,a.jsx)("td",{children:(0,a.jsxs)("small",{children:[i.quantity," ",i.unit]})}),(0,a.jsx)("td",{children:(0,a.jsxs)("small",{children:[i.price.toFixed(2)," €"]})})]},s)})})]}):(0,a.jsxs)("div",{children:[i.map((e,s)=>(0,a.jsxs)(m.Fragment,{children:[(0,a.jsx)(_,{index:s,data:e,setData:e=>u(s,e),handleRemoveLine:()=>b(s)}),(0,a.jsx)(o.Z,{dashed:!0,small:!0})]},"".concat(s,"-").concat(i.length))),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)(j.Z,{variant:"outline-primary",size:"sm",onClick:h,disabled:c,children:[(0,a.jsx)(y.JO,{icon:"material-symbols:add-circle-outline-rounded",className:"me-1"}),"Add invoice line"]})})]}),!c&&(0,a.jsx)(o.Z,{small:!0}),(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{direction:"horizontal",children:(0,a.jsxs)(x.Z,{direction:"horizontal",className:"ms-auto",children:[(0,a.jsxs)("div",{className:"me-3",children:[(0,a.jsx)("strong",{children:"Invoice total: "}),(0,a.jsx)("span",{className:"text-muted fw-bold",children:t})]}),(0,a.jsx)(j.Z,{size:"sm",onClick:g,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.JO,{icon:"mdi:pencil",className:"me-1"}),"Edit lines"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.JO,{icon:"material-symbols:check-circle-outline-rounded",className:"me-1"}),"Finish invoice"]})})]})})})]})}var Z=s(8496),F=!0;function S(e){let{sourceCode:i}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{children:(0,a.jsx)("title",{children:"Invoice array fields - React Dumb Form Docs"})}),(0,a.jsxs)("main",{children:[(0,a.jsx)("h1",{children:"Invoice array fields"}),(0,a.jsx)("p",{className:"text-muted",children:"An invoice creation example. This is a real-world example of how to approach array fields before there is any higher level API with abstractions implemented."}),(0,a.jsxs)(Z.Z,{variant:"danger",children:[(0,a.jsx)("strong",{children:"This example is non-standard!"})," It does not use the form meta and state table since it uses more underlying forms."]}),(0,a.jsx)(Z.U,{}),(0,a.jsx)(o.Z,{}),(0,a.jsx)(u.U,{sourceCode:i,ignoreMeta:!0,name:"example-invoice-array-fields-form",children:(0,a.jsx)(q,{})})]})]})}}},function(e){e.O(0,[100,214,479,774,888,179],function(){return e(e.s=6294)}),_N_E=e.O()}]);